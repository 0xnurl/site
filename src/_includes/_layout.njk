<!doctype html>
<html lang="{{ lang }}" dir="{{ langDir }}">
  {% set fullTitle = [_(title), 'no hello'] | select() | join(' - ') %}
  <head>
    <title>{{ fullTitle }}</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <!-- primary meta -->
    <meta name="title" content="{{ fullTitle }}" />
    <meta name="description" content="{{ _("header.subtitle") }}" />
    <!-- opengraph/facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ site.root }}/" />
    <meta property="og:title" content="{{ fullTitle }}" />
    <meta
      property="og:description"
      content="{{ _("header.subtitle") }}"
    />
    <meta property="og:image" content="{{ site.root }}/img/newmeta.png" />
    <!-- twitter -->
    <meta property="twitter:card" content="summary" />
    <meta property="twitter:url" content="{{ site.root }}/" />
    <meta property="twitter:title" content="{{ fullTitle }}" />
    <meta
      property="twitter:description"
      content="{{ _("header.subtitle") }}"
    />
    <meta property="twitter:image" content="{{ site.root }}/img/newmeta.png" />
    <!-- icons -->
    <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />
    <link rel="shortcut icon" href="/img/favicon.png" type="image/x-icon" />
    <link rel="icon" href="/img/favicon.png" type="image/x-icon" />
  </head>
  <body>
    <div>
      <p>lang:</p>
      <ul>
        {%- for locale in locales -%}
          <li>
            <a href="{%- relocalizePath locale.path, page.url -%}">{{ locale.name }}</a>
          </li>
        {%- endfor -%}
      </ul>

    </div>

    {{ content | safe }}

    <script src="https://cdn.jsdelivr.net/npm/@klaxit/cookie-consent@0.3.4/dist/cookie-consent.js"></script>
    <script>
      function updateAnalytics() {
        const MEASUREMENT_ID = "169824146-1";
        if (window.CookieConsent.acceptedCategories?.includes("analytics")) {
          window[`ga-disable-${MEASUREMENT_ID}`] = undefined;
          if (typeof window.ga === "undefined") {
            const script = document.createElement("script");
            script.src = `//www.googletagmanager.com/gtag/js?id=UA-${MEASUREMENT_ID}`;
            script.async = 1;
            const firstScript = document.getElementsByTagName("script")[0];
            firstScript.parentNode.insertBefore(script, firstScript);
          }
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());
          gtag("config", `UA-${MEASUREMENT_ID}`, { anonymize_ip: true });
        } else {
          window[`ga-disable-${MEASUREMENT_ID}`] = true;
        }
      }
      const CookieConsent = window.CookieConsent;
      const cc = new CookieConsent({ title: "We use cookies 🍪" });
      cc.on("change", (cc) => {
        updateAnalytics();
      });
      updateAnalytics();
    </script>
  </body>
</html>